# üéÆ Gu√≠a Completa: Sistema de Animaciones 8 Direcciones - Top Down

Esta gu√≠a te ense√±ar√° paso a paso c√≥mo configurar un sistema de animaciones profesional para tu personaje con movimiento en 8 direcciones (arriba, abajo, izquierda, derecha y diagonales) usando Animator Controller y Blend Trees.

---

## üìã Tabla de Contenidos
1. [Preparaci√≥n de Animaciones](#1-preparaci√≥n-de-animaciones)
2. [Crear el Animator Controller](#2-crear-el-animator-controller)
3. [Configurar Par√°metros](#3-configurar-par√°metros)
4. [Crear Estados y Blend Trees](#4-crear-estados-y-blend-trees)
5. [Configurar Transiciones](#5-configurar-transiciones)
6. [Configurar el GameObject](#6-configurar-el-gameobject)
7. [Probar el Sistema](#7-probar-el-sistema)

---

## 1. Preparaci√≥n de Animaciones

### Animaciones Necesarias

Para un sistema completo de 8 direcciones necesitas:

#### **IDLE (8 clips):**
- `Idle_North` (mirando arriba)
- `Idle_NorthEast` (diagonal arriba-derecha)
- `Idle_East` (mirando derecha)
- `Idle_SouthEast` (diagonal abajo-derecha)
- `Idle_South` (mirando abajo)
- `Idle_SouthWest` (diagonal abajo-izquierda)
- `Idle_West` (mirando izquierda)
- `Idle_NorthWest` (diagonal arriba-izquierda)

#### **WALK (8 clips):**
- `Walk_North`
- `Walk_NorthEast`
- `Walk_East`
- `Walk_SouthEast`
- `Walk_South`
- `Walk_SouthWest`
- `Walk_West`
- `Walk_NorthWest`

#### **RUN (8 clips):**
- `Run_North`
- `Run_NorthEast`
- `Run_East`
- `Run_SouthEast`
- `Run_South`
- `Run_SouthWest`
- `Run_West`
- `Run_NorthWest`

### Ubicaci√≥n de Archivos
Coloca todos tus Animation Clips en:
```
Assets/Animations/Player/
```

---

## 2. Crear el Animator Controller

### Paso 1: Crear el Controller
1. En Unity, ve a la carpeta `Assets/AnimationControllers/`
2. Click derecho ‚Üí `Create` ‚Üí `Animator Controller`
3. N√≥mbralo: **`PlayerAnimatorController`**

### Paso 2: Abrir el Animator Window
1. Doble click en `PlayerAnimatorController`
2. Se abrir√° la ventana Animator (si no est√° visible: `Window` ‚Üí `Animation` ‚Üí `Animator`)

---

## 3. Configurar Par√°metros

En la ventana **Animator**, ve a la pesta√±a **Parameters** (lado izquierdo).

### Crear los siguientes par√°metros:

1. **Speed** (Float)
   - Click en `+` ‚Üí `Float`
   - Nombre: `Speed`
   - Valor por defecto: `0`
   - **Funci√≥n:** Controla la velocidad de movimiento (0 = quieto, mayor = m√°s r√°pido)

2. **IsRunning** (Bool)
   - Click en `+` ‚Üí `Bool`
   - Nombre: `IsRunning`
   - Valor por defecto: `false`
   - **Funci√≥n:** Indica si el personaje est√° corriendo

3. **MoveX** (Float)
   - Click en `+` ‚Üí `Float`
   - Nombre: `MoveX`
   - Valor por defecto: `0`
   - **Funci√≥n:** Direcci√≥n horizontal (-1 = izquierda, 1 = derecha)

4. **MoveY** (Float)
   - Click en `+` ‚Üí `Float`
   - Nombre: `MoveY`
   - Valor por defecto: `0`
   - **Funci√≥n:** Direcci√≥n vertical (-1 = abajo, 1 = arriba)

---

## 4. Crear Estados y Blend Trees

### Estado 1: IDLE (Reposo)

#### Paso 1: Crear el Blend Tree
1. Click derecho en el grid del Animator ‚Üí `Create State` ‚Üí `From New Blend Tree`
2. Renombrar el estado a: **`Idle`**
3. Doble click en el estado `Idle` para entrar al Blend Tree

#### Paso 2: Configurar el Blend Tree de Idle
1. Selecciona el nodo del Blend Tree en el centro
2. En el **Inspector**, configura:
   - **Blend Type:** `2D Simple Directional`
   - **Parameters:**
     - Primera posici√≥n: `MoveX`
     - Segunda posici√≥n: `MoveY`

#### Paso 3: Agregar las 8 animaciones de Idle
1. En la secci√≥n **Motion**, haz click en `+` para agregar 8 motion fields
2. Arrastra cada Animation Clip de Idle y configura sus posiciones:

| Animation Clip | Pos X | Pos Y | Direcci√≥n |
|----------------|-------|-------|-----------|
| Idle_North | 0 | 1 | ‚Üë |
| Idle_NorthEast | 0.707 | 0.707 | ‚Üó |
| Idle_East | 1 | 0 | ‚Üí |
| Idle_SouthEast | 0.707 | -0.707 | ‚Üò |
| Idle_South | 0 | -1 | ‚Üì |
| Idle_SouthWest | -0.707 | -0.707 | ‚Üô |
| Idle_West | -1 | 0 | ‚Üê |
| Idle_NorthWest | -0.707 | 0.707 | ‚Üñ |

> **üí° Tip:** Los valores 0.707 son aproximadamente ‚àö2/2, lo que crea las diagonales perfectas a 45¬∞.

#### Paso 4: Salir del Blend Tree
- Click en `Base Layer` en la parte superior del Animator para volver a la vista principal

---

### Estado 2: WALK (Caminar)

#### Paso 1: Crear el Blend Tree
1. Click derecho en el grid ‚Üí `Create State` ‚Üí `From New Blend Tree`
2. Renombrar a: **`Walk`**
3. Doble click para entrar

#### Paso 2: Configurar
1. **Blend Type:** `2D Simple Directional`
2. **Parameters:**
   - Primera: `MoveX`
   - Segunda: `MoveY`

#### Paso 3: Agregar las 8 animaciones de Walk
Configura igual que Idle pero con los clips de Walk:

| Animation Clip | Pos X | Pos Y |
|----------------|-------|-------|
| Walk_North | 0 | 1 |
| Walk_NorthEast | 0.707 | 0.707 |
| Walk_East | 1 | 0 |
| Walk_SouthEast | 0.707 | -0.707 |
| Walk_South | 0 | -1 |
| Walk_SouthWest | -0.707 | -0.707 |
| Walk_West | -1 | 0 |
| Walk_NorthWest | -0.707 | 0.707 |

#### Paso 4: Volver a Base Layer

---

### Estado 3: RUN (Correr)

#### Paso 1: Crear el Blend Tree
1. Click derecho ‚Üí `Create State` ‚Üí `From New Blend Tree`
2. Renombrar a: **`Run`**
3. Doble click para entrar

#### Paso 2: Configurar
1. **Blend Type:** `2D Simple Directional`
2. **Parameters:**
   - Primera: `MoveX`
   - Segunda: `MoveY`

#### Paso 3: Agregar las 8 animaciones de Run
| Animation Clip | Pos X | Pos Y |
|----------------|-------|-------|
| Run_North | 0 | 1 |
| Run_NorthEast | 0.707 | 0.707 |
| Run_East | 1 | 0 |
| Run_SouthEast | 0.707 | -0.707 |
| Run_South | 0 | -1 |
| Run_SouthWest | -0.707 | -0.707 |
| Run_West | -1 | 0 |
| Run_NorthWest | -0.707 | 0.707 |

#### Paso 4: Volver a Base Layer

---

## 5. Configurar Transiciones

Ahora debes conectar los estados para que transicionen correctamente.

### Transici√≥n 1: Idle ‚Üí Walk

1. Click derecho en `Idle` ‚Üí `Make Transition`
2. Arrastra la flecha hacia `Walk`
3. Selecciona la transici√≥n (la flecha blanca)
4. En el **Inspector**, configura:
   - **Has Exit Time:** ‚ùå Desactivar
   - **Transition Duration:** `0.25` (suave)
   - **Conditions:**
     - Click en `+`
     - Agregar: `Speed` `Greater` `0.1`

### Transici√≥n 2: Walk ‚Üí Idle

1. Click derecho en `Walk` ‚Üí `Make Transition` ‚Üí Hacia `Idle`
2. Configurar:
   - **Has Exit Time:** ‚ùå Desactivar
   - **Transition Duration:** `0.25`
   - **Conditions:**
     - `Speed` `Less` `0.1`

### Transici√≥n 3: Walk ‚Üí Run

1. `Walk` ‚Üí `Make Transition` ‚Üí Hacia `Run`
2. Configurar:
   - **Has Exit Time:** ‚ùå Desactivar
   - **Transition Duration:** `0.2`
   - **Conditions:**
     - `IsRunning` `true`

### Transici√≥n 4: Run ‚Üí Walk

1. `Run` ‚Üí `Make Transition` ‚Üí Hacia `Walk`
2. Configurar:
   - **Has Exit Time:** ‚ùå Desactivar
   - **Transition Duration:** `0.2`
   - **Conditions:**
     - `IsRunning` `false`

### Transici√≥n 5: Run ‚Üí Idle

1. `Run` ‚Üí `Make Transition` ‚Üí Hacia `Idle`
2. Configurar:
   - **Has Exit Time:** ‚ùå Desactivar
   - **Transition Duration:** `0.25`
   - **Conditions:**
     - `Speed` `Less` `0.1`

### Configurar Entry State
1. Aseg√∫rate de que `Idle` sea el estado por defecto (debe tener una flecha naranja desde `Entry`)
2. Si no lo es, click derecho en `Idle` ‚Üí `Set as Layer Default State`

---

## 6. Configurar el GameObject

### Paso 1: Preparar el Personaje
1. Selecciona tu GameObject del personaje en la jerarqu√≠a
2. Si no tiene un componente **Animator**, agr√©galo:
   - Click en `Add Component`
   - Busca y agrega: `Animator`

### Paso 2: Asignar el Controller
1. Con el personaje seleccionado
2. En el componente **Animator** en el Inspector
3. Arrastra `PlayerAnimatorController` al campo **Controller**

### Paso 3: Agregar el Script de Animaci√≥n
1. Click en `Add Component`
2. Busca: `Player Animation Controller`
3. Configurar en el Inspector:
   - **Animator:** Deber√≠a auto-asignarse, si no, arr√°stralo
   - **Run Threshold:** `5` (velocidad a partir de la cual corre)
   - **Animation Smooth Time:** `0.1` (suavizado)

### Paso 4: Agregar Control de Movimiento (Opcional)
Si quieres probar inmediatamente:
1. `Add Component` ‚Üí `Player Movement Example`
2. Configurar:
   - **Walk Speed:** `3`
   - **Run Speed:** `6`
   - **Rb:** Asigna tu Rigidbody2D si usas f√≠sica

---

## 7. Probar el Sistema

### Prueba en Play Mode
1. Click en **Play** ‚ñ∂Ô∏è
2. Usa las teclas:
   - **WASD / Flechas:** Movimiento en 8 direcciones
   - **Shift:** Mant√©n presionado para correr

### Debugging en el Animator
1. Con el juego en ejecuci√≥n (Play Mode)
2. Abre la ventana **Animator** con tu Controller abierto
3. Ver√°s en tiempo real:
   - Qu√© estado est√° activo (azul)
   - Los valores de los par√°metros cambiando
   - Las transiciones activ√°ndose

### Ajustar Valores en Tiempo Real
Puedes ajustar los par√°metros manualmente mientras el juego corre:
1. En el **Animator Window** ‚Üí Pesta√±a **Parameters**
2. Mueve los sliders de `MoveX`, `MoveY`, `Speed`
3. Activa/desactiva `IsRunning`
4. Observa c√≥mo cambian las animaciones

---

## üéØ Resumen de Configuraci√≥n

### Par√°metros del Animator
```
- Speed (Float): Magnitud de la velocidad
- IsRunning (Bool): Si est√° corriendo
- MoveX (Float): Direcci√≥n horizontal (-1 a 1)
- MoveY (Float): Direcci√≥n vertical (-1 a 1)
```

### Estados
```
1. Idle ‚Üí Blend Tree 2D (8 direcciones)
2. Walk ‚Üí Blend Tree 2D (8 direcciones)
3. Run ‚Üí Blend Tree 2D (8 direcciones)
```

### Transiciones
```
Idle ‚Üî Walk: Basado en Speed
Walk ‚Üî Run: Basado en IsRunning
Run ‚Üí Idle: Basado en Speed
```

---

## üîß Consejos y Mejores Pr√°cticas

### 1. Optimizaci√≥n
- Los Blend Trees 2D Simple Directional son m√°s eficientes que otros tipos
- Los par√°metros cacheados (con StringToHash) mejoran el rendimiento

### 2. Suavizado
- `Animation Smooth Time` controla qu√© tan suave son las transiciones
- Valores m√°s altos (0.2-0.3) = m√°s suave pero menos responsive
- Valores m√°s bajos (0.05-0.1) = m√°s directo pero puede verse brusco

### 3. Velocidades
- Ajusta `Run Threshold` seg√∫n la velocidad de tu personaje
- Debe ser un valor intermedio entre walk y run speed

### 4. Animaciones Faltantes
Si no tienes todas las 8 direcciones a√∫n, puedes:
- Usar 4 direcciones (N, S, E, W) y eliminar las diagonales
- Duplicar animaciones temporalmente
- Usar Blend Type `2D Freeform Directional` para menos precisi√≥n

### 5. Testing
- Activa `Gizmos` en la Game View para ver la direcci√≥n del movimiento
- Usa el Animator Window en Play Mode para debugging
- Ajusta las transiciones si se siente "perezoso" o "brusco"

---

## ‚ùì Soluci√≥n de Problemas

### El personaje no anima
‚úÖ Verifica que:
- El Animator tenga el Controller asignado
- El script PlayerAnimationController est√© adjunto
- Los par√°metros tengan los nombres exactos
- Haya animaciones asignadas en los Blend Trees

### Las animaciones no cambian de direcci√≥n
‚úÖ Verifica que:
- MoveX y MoveY est√©n recibiendo valores
- Las posiciones en el Blend Tree sean correctas
- El Blend Type sea "2D Simple Directional"

### Las transiciones son muy bruscas
‚úÖ Ajusta:
- Aumenta `Transition Duration` (0.3-0.5)
- Aumenta `Animation Smooth Time` en el script

### El personaje no corre
‚úÖ Verifica:
- `IsRunning` se est√° activando
- La transici√≥n Walk ‚Üí Run existe y tiene la condici√≥n correcta
- `Run Threshold` es menor que tu velocidad de correr

---

## üìö Archivos Creados

```
Assets/
‚îú‚îÄ‚îÄ Animations/
‚îÇ   ‚îî‚îÄ‚îÄ Player/
‚îÇ       ‚îú‚îÄ‚îÄ Idle_North.anim (y otros 7)
‚îÇ       ‚îú‚îÄ‚îÄ Walk_North.anim (y otros 7)
‚îÇ       ‚îî‚îÄ‚îÄ Run_North.anim (y otros 7)
‚îú‚îÄ‚îÄ AnimationControllers/
‚îÇ   ‚îî‚îÄ‚îÄ PlayerAnimatorController.controller
‚îî‚îÄ‚îÄ Scripts/
    ‚îú‚îÄ‚îÄ PlayerAnimationController.cs
    ‚îî‚îÄ‚îÄ PlayerMovementExample.cs
```

---

## üéì Siguiente Nivel

Una vez domines este sistema, puedes:
1. Agregar m√°s estados (atacar, saltar, morir)
2. Implementar Animation Events
3. Usar Animation Layers para animaciones simult√°neas
4. Agregar IK (Inverse Kinematics) para apuntar
5. Implementar Root Motion para movimiento m√°s realista

---

## üìû Soporte

Si tienes problemas:
1. Revisa la consola de Unity para errores
2. Verifica que todos los nombres coincidan exactamente
3. Aseg√∫rate de que las animaciones est√©n configuradas para Loop
4. Comprueba que el Animator no est√© desactivado

---

**¬°Buena suerte con tu proyecto VTuber! üéÆ‚ú®**
